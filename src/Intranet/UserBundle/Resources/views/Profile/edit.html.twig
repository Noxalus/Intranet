{% extends 'IntranetCoreBundle:Core:layout.html.twig' %}

{% block content %}
<h1>Edition du profil de {{ user.firstName }} {{ user.lastName }}</h1>
<div class="well">
    <div style="float: right;">{{ user_photo(user, 'user_photo') }}</div>
    <form action="{{ path('user_profile_edit', {'user_id': user.id }) }}" method="POST"  {{ form_enctype(form) }}>
        <div id="intranet_userbundle_usertype">
            {{ form_errors(form) }}
            <div>
                {{ form_label(form.username) }}
                {{ form_errors(form.username) }}
                {{ form_widget(form.username) }}
            </div>
            <div>
                {{ form_label(form.email) }}
                {{ form_errors(form.email) }}
                {{ form_widget(form.email) }}
            </div>
            <div>
                {{ form_label(form.firstName) }}
                {{ form_errors(form.firstName) }}
                {{ form_widget(form.firstName) }}
            </div>
            <div>
                {{ form_label(form.lastName) }}
                {{ form_errors(form.lastName) }}
                {{ form_widget(form.lastName) }}
            </div>
            <div>
                {{ form_label(form.promo) }}
                {{ form_errors(form.promo) }}
                {{ form_widget(form.promo) }}
            </div>
            
            {% if is_granted('ROLE_TEACHER') %}
            <div>
                {{ form_label(form.roles) }}
                {{ form_errors(form.roles) }}
                {{ form_widget(form.roles) }}
            </div>
            {% endif %}
            <div>
                <div class="fileupload fileupload-new" data-provides="fileupload">
                    {{ form_label(form.photo) }}
                    {{ form_errors(form.photo) }}
                    <div class="input-append">
                        <div class="uneditable-input span3"><i class="icon-file fileupload-exists"></i> <span class="fileupload-preview"></span></div><span class="btn btn-file"><span class="fileupload-new">Selectionnez un fichier</span><span class="fileupload-exists">Changer</span>{{ form_widget(form.photo.file) }}</span><a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Supprimer</a>
                    </div>
                </div>
            </div>
            
            {{ form_widget(form._token) }}
        </div>
        <br />
        <input type="submit" value="Valider" class="btn btn-primary" />
    </form>
</div>
{% endblock content %}